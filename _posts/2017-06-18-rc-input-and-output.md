---
ID: 413
post_title: RC Input and Output
author: impeccableaslan
post_date: 2017-06-18 16:04:56
post_excerpt: ""
layout: post
permalink: >
  http://rcnode.com/index.php/2017/06/18/rc-input-and-output/
published: true
---
[et_pb_section fb_built="1" admin_label="section" _builder_version="3.0.47"][et_pb_row admin_label="row" _builder_version="3.0.47" background_size="initial" background_position="top_left" background_repeat="repeat"][et_pb_column type="4_4" _builder_version="3.0.47" parallax="off" parallax_method="on"][et_pb_text admin_label="Text" _builder_version="3.0.47" background_size="initial" background_position="top_left" background_repeat="repeat"]
					
				[/et_pb_text][et_pb_text _builder_version="3.0.51"]<h1>Radio control input:[caption width="690" id="attachment_417" align="<g class="gr_ gr_128 gr-alert gr_spell gr_inline_cards gr_run_anim ContextualSpelling ins-del multiReplace" id="128" data-gr-id="128">alignnone</g>"]<img src="http://rcnode.com/wp-content/uploads/2017/06/RC-input-and-output.png" width="690" height="413" alt="" class="wp-image-417 size-full" /> Image from ardupilot.org[/caption]</h1>
<p>Each radio controlled toys have 4 key components:</p>
<ol>
<li>Transmitter, the thing that sends radio wave to the receiver</li>
<li>Receiver, a thing made of antenna and circuit board that receives signal from the transmitter and turns on the motor of the drone as commanded by the transmitter</li>
<li>Motor</li>
<li>Power source</li>
</ol>
<p></p>
<p>Transmitter first <g class="gr_ gr_67 gr-alert gr_gramm gr_inline_cards gr_run_anim Grammar multiReplace" id="67" data-gr-id="67">send</g> a signal to the receiver through radio waves, of which drives the motor and cause it to rotate. This kind of radio wave <g class="gr_ gr_68 gr-alert gr_gramm gr_inline_cards gr_run_anim Grammar multiReplace" id="68" data-gr-id="68">is call</g> control signal. The transmitter sends a signal through <g class="gr_ gr_69 gr-alert gr_gramm gr_inline_cards gr_run_anim Grammar only-ins doubleReplace replaceWithoutSep" id="69" data-gr-id="69">frequency</g> to the receiver. Transmitter has a power source that supplies the power for the controls and the transmission of <g class="gr_ gr_70 gr-alert gr_gramm gr_inline_cards gr_run_anim Grammar only-ins doubleReplace replaceWithoutSep" id="70" data-gr-id="70">signal</g>.</p>
<p><span>When the user presses a button on the radio controller, the press causes a pair of electrical conductors to touch, creating a circuit of which causes the transmitter to transmit a sequence of electrical pulses. These sequences start off with </span><span>synchronization pulses, followed by the pulse sequence. Each synchronization segment has a set amount of time. The pulse segment tells the antenna what new information there are.</span></p>
<p>Modulation is the process of changing the properties of a periodic waveform, named carrier signal, with a modulating signal containing a variety of information to be transmitted. Pulse modulation receives continuous signals and with its pulse segment, converts them into a series of pulses. These pulses are proportional to the amplitude of signal and time spent next to it. Therefore with pulse modulation, it is the series of pulses that carry information and not the continuous stream.</p>
<p>Firstly, the transmitter <g class="gr_ gr_78 gr-alert gr_gramm gr_inline_cards gr_run_anim Grammar multiReplace" id="78" data-gr-id="78">send</g> out bursts of radio waves, this is pulse modulation as the transmitter is transferring information. The receiver is monitoring <g class="gr_ gr_79 gr-alert gr_gramm gr_inline_cards gr_run_anim Grammar multiReplace" id="79" data-gr-id="79">the an</g> assigned frequency for a signal and should it detect a radio burst, it would process it through a filter that blocks out unrelated frequency (So frequency other than that of the transmitter would be ignored). The signals that remain are converted into <g class="gr_ gr_81 gr-alert gr_gramm gr_inline_cards gr_run_anim Grammar only-ins doubleReplace replaceWithoutSep" id="81" data-gr-id="81">electrical</g> pulse sequence. This pulse sequence is sent to an integrated circuit of which decodes the pulse sequence and operates the appropriate motor. These pulses correspond to different actions. For example, if a motor could turn clockwise when given a pulse of 20 pulses but anti-clockwise when given a pulse of 50 pulses. This is done by inverting the current to the very same motor and thus make it rotate in the opposite direction.</p>
<h1></h1>
<h1>PWM - Pulse Width Modulation:</h1>
<p>This is one of the techniques to encode messages/commands within the code. "See Object Avoidance". </p>
<p><g class="gr_ gr_55 gr-alert gr_spell gr_inline_cards gr_run_anim ContextualSpelling multiReplace" id="55" data-gr-id="55">Analogue</g>: Process information from a continuously variable physical quantity, meaning information that constantly <g class="gr_ gr_52 gr-alert gr_gramm gr_inline_cards gr_run_anim Grammar multiReplace" id="52" data-gr-id="52">change</g>, hence variable</p>
<h1></h1>
<h1>PPM - Pulse Position Modulation:</h1>
<p>A pulse position manager is another <g class="gr_ gr_73 gr-alert gr_spell gr_inline_cards gr_run_anim ContextualSpelling multiReplace" id="73" data-gr-id="73">analogue</g> signal that unlike PWM, does not use multiple wires per channel. PPM's signal can be stacked over one another without <g class="gr_ gr_74 gr-alert gr_gramm gr_inline_cards gr_run_anim Grammar multiReplace" id="74" data-gr-id="74">lost</g>. Some platforms such as Pixhawk requires PPM (SBUS) input and if you were to use a PWM receiver, a PPM encoder is required for the two to communicate. This encoder can be found from Ardupilot's website and converts a number of PWM signals into one PPM output. </p>
<h1></h1>
<h1>PCM - Pulse Code Modulation:</h1>
<p>This operates with a similar idea to PPM but is instead a digital signal made so much better by its low tendency to interfere and low errors. This reduces errors for parity bits can be implemented into the signal, convenient to check for 0/1, low/high. </p>
<h1></h1>
<h1>SBUS - Serial Bus:</h1>
<p>This communicates through serial and is composed <g class="gr_ gr_56 gr-alert gr_gramm gr_inline_cards gr_run_anim Style multiReplace" id="56" data-gr-id="56">of  digital</g> signals as well. Being a Bus, it can support up to 18 channels with merely one signal cable.</p>
<h1></h1>
<h1>RC input</h1>
<p>RC input is a key feature for the drone. It allows the pilot to control the airframe, give them the power to change modes, give them control over equipment the likes of camera mounts. The Quadcopter supports several types of RC input of which is entirely dependent on the board type:</p>
<p>-PPMSum - on PX4, Pixhawk, <g class="gr_ gr_220 gr-alert gr_gramm gr_inline_cards gr_run_anim Punctuation only-ins replaceWithoutSep" id="220" data-gr-id="220">Linux</g> and APM2</p>
<p>-SBUS - on PX4, <g class="gr_ gr_221 gr-alert gr_gramm gr_inline_cards gr_run_anim Punctuation only-ins replaceWithoutSep" id="221" data-gr-id="221">Pixhawk</g> and Linux</p>
<p>-Spektrum/DSM - on PX4, <g class="gr_ gr_222 gr-alert gr_gramm gr_inline_cards gr_run_anim Punctuation only-ins replaceWithoutSep" id="222" data-gr-id="222">Pixhawk</g> and Linux</p>
<p>-PWM - on APM1 and APM2</p>
<p>-RC Override (MAVLink) - all boards</p>
<p></p>
<p>Channels: The band of frequency used for a specific purpose </p>
<p>Logic level <g class="gr_ gr_212 gr-alert gr_gramm gr_inline_cards gr_run_anim Grammar multiReplace" id="212" data-gr-id="212"><g class="gr_ gr_211 gr-alert gr_gramm gr_inline_cards gr_run_anim Grammar multiReplace" id="211" data-gr-id="211">are</g> states</g> that a signal can process, it is the voltage difference between the source and ground. It is the states in which a signal can exist. See Sensor Drivers.</p>
<p>Baud: A unit of transmission speed equal to the number of times a signal changes state per second. For signals with only two possible <g class="gr_ gr_214 gr-alert gr_gramm gr_inline_cards gr_run_anim Punctuation only-ins replaceWithoutSep" id="214" data-gr-id="214">states</g> one baud is equivalent to one bit per second. So it calculates the speed in <g class="gr_ gr_215 gr-alert gr_gramm gr_inline_cards gr_run_anim Style multiReplace" id="215" data-gr-id="215">which  the</g> protocol can change the states.</p>
<p><span><g class="gr_ gr_231 gr-alert gr_gramm gr_inline_cards gr_run_anim Grammar multiReplace" id="231" data-gr-id="231">Number</g> of channels available for use depends entirely on the hardware of the board. SBUS and Spektrum/DSM are both serial based protocols. SBUS is a 100kbaud inverted UART protocol and Spektrum/DSM is <g class="gr_ gr_232 gr-alert gr_gramm gr_inline_cards gr_run_anim Grammar multiReplace" id="232" data-gr-id="232">a 115200</g> baud UART protocol. There are also UART of which are serial but on the "hardware" side, so the bare serial hardware. As RC input is the users giving <g class="gr_ gr_235 gr-alert gr_gramm gr_inline_cards gr_run_anim Grammar only-ins doubleReplace replaceWithoutSep" id="235" data-gr-id="235">command</g> to the device, RC output would be the signal, thus it is how motors and servos are controlled. Again, the number of available output channels <g class="gr_ gr_238 gr-alert gr_gramm gr_inline_cards gr_run_anim Grammar multiReplace" id="238" data-gr-id="238">depend</g> on the board </span>and can even depend on the vehicle type and configuration parameters<span>. The pulse width modulation value is <g class="gr_ gr_207 gr-alert gr_gramm gr_inline_cards gr_run_anim Grammar only-del replaceWithoutSep" id="207" data-gr-id="207">as </g>a default, 50Hz, but can be configured to accept a wide range of update values. </span>For example, the Copter code sets up its motor outputs to drive the ESCs at a much higher rate - typically over 400Hz.</p>
<p>AP_HAL RCinput object: This provides <g class="gr_ gr_213 gr-alert gr_spell gr_inline_cards gr_run_anim ContextualSpelling multiReplace" id="213" data-gr-id="213">low level</g> access to the channels of which has its values received by the board. The values returned are PWM values on microsecond.</p>
<p>AP_HAL_Output object: Provides <g class="gr_ gr_209 gr-alert gr_spell gr_inline_cards gr_run_anim ContextualSpelling multiReplace" id="209" data-gr-id="209">low level</g> access to all output channels, the use of this is very specific as it would involve scouting and on-chip timers.</p>
<p>The RC_Channel object: Both AP_HAL RCinput and AP_HAL_Output are for low level, the RC_Channel provides access to the two through a higher level object.</p>
<p>Servo: A small device with an output shaft. This shaft can move to different angles by sending a signal to the servo. The shaft will remain at that position for as long as the signal remains on the input line. </p>
<p>The strange input/output setup in RC_Channel: By taking a look at RC_Channel <g class="gr_ gr_216 gr-alert gr_spell gr_inline_cards gr_run_anim ContextualSpelling ins-del multiReplace" id="216" data-gr-id="216">carefuly</g>, it appears that a number <g class="gr_ gr_225 gr-alert gr_gramm gr_inline_cards gr_run_anim Style multiReplace" id="225" data-gr-id="225">of  variables</g> apply to both left and <g class="gr_ gr_224 gr-alert gr_spell gr_inline_cards gr_run_anim ContextualSpelling multiReplace" id="224" data-gr-id="224">right hand</g> side. For example, the rc1->radio_trim applies to channel 1 as an input (specifying the trim point for calculation <g class="gr_ gr_227 gr-alert gr_gramm gr_inline_cards gr_run_anim Grammar multiReplace" id="227" data-gr-id="227">a input</g> proportion. Plus as an output, specifying the midpoint of a servo attached to that channel.). This would tie the input channel numbers to output channel numbers, even though they are separate concepts. <g class="gr_ gr_230 gr-alert gr_gramm gr_inline_cards gr_run_anim Grammar multiReplace" id="230" data-gr-id="230">A RC_Channel</g> would not be able to do this without messy code.</p>
<p>The RC_Channel_aux object: This is a subclass of RC_Channel and is a type of RC_Channel with additional properties controlled by the user. For example, if the user desires 6 to be <g class="gr_ gr_217 gr-alert gr_gramm gr_inline_cards gr_run_anim Grammar only-ins doubleReplace replaceWithoutSep" id="217" data-gr-id="217">channel</g> for camera mount, they can set their parameter RC6 to 22. Any channel with its function at 22 will be deflected as the input/output is configured so that only specific signals from RC_Channel or its subclass will be able to communicate with it. This is a one to many <g class="gr_ gr_239 gr-alert gr_gramm gr_inline_cards gr_disable_anim_appear Grammar multiReplace" id="239" data-gr-id="239">arrangement</g>.</p>
<h1></h1>
<h1>IBUS (<g class="gr_ gr_317 gr-alert gr_spell gr_inline_cards gr_run_anim ContextualSpelling ins-del multiReplace" id="317" data-gr-id="317">flysky</g>)</h1>
<p>This is a new digital serial protocol developed by <g class="gr_ gr_328 gr-alert gr_spell gr_inline_cards gr_run_anim ContextualSpelling ins-del multiReplace" id="328" data-gr-id="328">flysky</g> and it serves as a <g class="gr_ gr_331 gr-alert gr_spell gr_inline_cards gr_run_anim ContextualSpelling multiReplace" id="331" data-gr-id="331">two way</g> protocol. Meaning that it can both send and receive data. This is especially useful for transmitting data.</p>
<h1></h1>
<h1>DSM2 and DSMX - Digital System Multiplexer</h1>
<p>The advantage of this as a transmitter and receiver are its robustness against interference and noise -Easier to isolate frequency and differentiate between that if the environment and that of the transmitter.</p>[/et_pb_text][et_pb_divider show_divider="on" _builder_version="3.0.51" color="#000000" divider_weight="2px"][/et_pb_divider][et_pb_comments _builder_version="3.0.51"][/et_pb_comments][/et_pb_column][/et_pb_row][/et_pb_section]